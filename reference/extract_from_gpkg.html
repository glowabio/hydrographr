<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Extract values from the stream order .gpkg files. — extract_from_gpkg • hydrographr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Extract values from the stream order .gpkg files. — extract_from_gpkg"><meta name="description" content="The function reads the attribute table of the stream network GeoPackage file
(.gpkg) stored on disk and extracts the data for one or more (or all) input
sub-catchment (i.e. stream segment) IDs. The output is a data.table, and only
the output is loaded into R."><meta property="og:description" content="The function reads the attribute table of the stream network GeoPackage file
(.gpkg) stored on disk and extracts the data for one or more (or all) input
sub-catchment (i.e. stream segment) IDs. The output is a data.table, and only
the output is loaded into R."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">hydrographr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.3.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/hydrographr.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/benchmark.html">Function benchmarks</a></li>
    <li><a class="dropdown-item" href="../articles/case_study_brazil.html">Case study - São Francisco drainage basin</a></li>
    <li><a class="dropdown-item" href="../articles/case_study_cuba.html">Case study - Cuba</a></li>
    <li><a class="dropdown-item" href="../articles/case_study_Danube.html">Case study - Danube basin</a></li>
    <li><a class="dropdown-item" href="../articles/case_study_germany.html">Case study - Germany</a></li>
    <li><a class="dropdown-item" href="../articles/example_other_stream_networks.html">Usage of hydrographr with other stream networks</a></li>
    <li><a class="dropdown-item" href="../articles/linux_system_setup.html">Setting up the package requirements on Linux</a></li>
    <li><a class="dropdown-item" href="../articles/macos_system_setup.html">Setting up the package requirements on MacOS</a></li>
    <li><a class="dropdown-item" href="../articles/windows_system_setup.html">Setting up the package requirements on Windows</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/glowabio/hydrographr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Extract values from the stream order .gpkg files.</h1>
      <small class="dont-index">Source: <a href="https://github.com/glowabio/hydrographr/blob/HEAD/R/extract_from_gpkg.R" class="external-link"><code>R/extract_from_gpkg.R</code></a></small>
      <div class="d-none name"><code>extract_from_gpkg.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The function reads the attribute table of the stream network GeoPackage file
(.gpkg) stored on disk and extracts the data for one or more (or all) input
sub-catchment (i.e. stream segment) IDs. The output is a data.table, and only
the output is loaded into R.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">extract_from_gpkg</span><span class="op">(</span></span>
<span>  <span class="va">data_dir</span>,</span>
<span>  <span class="va">subc_id</span>,</span>
<span>  <span class="va">subc_layer</span>,</span>
<span>  <span class="va">var_layer</span>,</span>
<span>  out_dir <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  file_name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  n_cores <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data-dir">data_dir<a class="anchor" aria-label="anchor" href="#arg-data-dir"></a></dt>
<dd><p>character. Path to the directory containing all input data.</p></dd>


<dt id="arg-subc-id">subc_id<a class="anchor" aria-label="anchor" href="#arg-subc-id"></a></dt>
<dd><p>a numeric vector of sub-catchment IDs or "all".
If "all", the attribute table is extracted for all the stream segments of
the input .gpkg layer. The stream segment IDs are the same as the
sub-catchment IDs. A vector of the sub-catchment IDs can be acquired
from the extract_ids() function, by sub-setting the resulting data.frame.</p></dd>


<dt id="arg-subc-layer">subc_layer<a class="anchor" aria-label="anchor" href="#arg-subc-layer"></a></dt>
<dd><p>character. Full path to the sub-catchment ID .tif layer</p></dd>


<dt id="arg-var-layer">var_layer<a class="anchor" aria-label="anchor" href="#arg-var-layer"></a></dt>
<dd><p>character vector of .gpkg files on disk,
e.g. "order_vect_point_h18v04.gpkg".</p></dd>


<dt id="arg-out-dir">out_dir<a class="anchor" aria-label="anchor" href="#arg-out-dir"></a></dt>
<dd><p>character. The directory where the output will be stored.
If the out_dir is specified, the attribute tables will be stored as .csv
files in this location, named after their input variable vector files
(e.g. "/path/to/stats_order_vect_point_h18v04.csv").
If NULL, the output is only loaded in R and not stored on disk.</p></dd>


<dt id="arg-file-name">file_name<a class="anchor" aria-label="anchor" href="#arg-file-name"></a></dt>
<dd><p>character. Name of the .csv file where the output table
will be stored. out_dir should also be specified for this purpose.</p></dd>


<dt id="arg-n-cores">n_cores<a class="anchor" aria-label="anchor" href="#arg-n-cores"></a></dt>
<dd><p>numeric. Number of cores used for parallelization, in case
multiple .gpkg files are provided to var_layer.
If NULL, available cores - 1 will be used.</p></dd>


<dt id="arg-quiet">quiet<a class="anchor" aria-label="anchor" href="#arg-quiet"></a></dt>
<dd><p>logical. If FALSE, the standard output will be printed.
Default is TRUE.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The following attributes are stored in the stream network .gpkg files (as
produced by the GRASS GIS function r.stream.order:</p><ul><li><p>cat - category</p></li>
<li><p>stream - sub-catchment / stream segment ID (equal to cat)</p></li>
<li><p>next_stream - downstream sub-catchment / stream segment ID</p></li>
<li><p>prev_streams; two or more uptstream sub-catchment / stream segment IDs</p></li>
<li><p>strahler - Strahler's stream order</p></li>
<li><p>horton - Hortons's stream order</p></li>
<li><p>shreve - Shreve's stream magnitude</p></li>
<li><p>hack - Hack's main streams or Gravelius order</p></li>
<li><p>topo_dim - Topological dimension streams order</p></li>
<li><p>scheidegger - Scheidegger's Consisted Associated Integers</p></li>
<li><p>drwal - Drwal's stream hierarchy</p></li>
<li><p>length - length of the stream segment</p></li>
<li><p>stright - length of the stream segment as a stright line</p></li>
<li><p>sinusoid - fractal dimension: stream segment length / stright stream</p></li>
<li><p>segment length;</p></li>
<li><p>cum_length - length of the stream from the source</p></li>
<li><p>flow_accum - flow accumulation within the sub-catchment of a stream segment</p></li>
<li><p>out_dist - distance of current stream initialisation from outlet</p></li>
<li><p>source_elev - elevation at stream segment initialisation</p></li>
<li><p>outlet_elev - elevation at stream segment outlet</p></li>
<li><p>elev_drop difference between source_elev and outlet_elev + drop outlet</p></li>
<li><p>out_drop - drop at the outlet of the stream segment</p></li>
<li><p>gradient - drop/length</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p><a href="https://grass.osgeo.org/grass82/manuals/v.in.ogr.html" class="external-link">https://grass.osgeo.org/grass82/manuals/v.in.ogr.html</a>
<a href="https://grass.osgeo.org/grass82/manuals/addons/r.stream.order.html" class="external-link">https://grass.osgeo.org/grass82/manuals/addons/r.stream.order.html</a></p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Afroditi Grigoropoulou, Jaime Garcia Marquez, Marlene Schürz</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># Download test data into temporary R folder</span></span>
<span><span class="co"># or define a different directory</span></span>
<span><span class="va">my_directory</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="download_test_data.html">download_test_data</a></span><span class="op">(</span><span class="va">my_directory</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Define path to the directory containing all input data</span></span>
<span><span class="va">test_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">my_directory</span>, <span class="st">"/hydrography90m_test_data"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Define sub-catchment ID layer</span></span>
<span><span class="va">subc_raster</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">my_directory</span>, <span class="st">"/hydrography90m_test_data"</span>,</span>
<span>                  <span class="st">"/subcatchment_1264942.tif"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Extract the attribute table of the file order_vect_59.gpkg for all the</span></span>
<span><span class="co"># sub-catchment IDs of the subcatchment_1264942.tif raster layer</span></span>
<span><span class="va">attribute_table</span> <span class="op">&lt;-</span> <span class="fu">extract_from_gpkg</span><span class="op">(</span>data_dir <span class="op">=</span> <span class="va">test_data</span>,</span>
<span>                                     subc_id <span class="op">=</span> <span class="st">"all"</span>,</span>
<span>                                     subc_layer <span class="op">=</span> <span class="va">subc_raster</span>,</span>
<span>                                     var_layer <span class="op">=</span> <span class="st">"order_vect_59.gpkg"</span>,</span>
<span>                                     n_cores <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Show the output table</span></span>
<span><span class="va">attribute_table</span></span></code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Marlene Schürz, Afroditi Grigoropoulou, Jaime Garcia Marquez, Yusdiel Torres Cambas, Christoph Schürz, Mathieu Floury, Thomas Tomiczek, Vanessa Bremerich, Merret Buurman, Giuseppe Amatulli, Sami Domisch.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

