<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Extract sub-catchment and/or basin IDs — extract_ids • hydrographr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Extract sub-catchment and/or basin IDs — extract_ids"><meta name="description" content='Extracts the ID value of the basin and/or sub-catchment raster
layer at given point locations. Can also be used for point-based extraction
of any .tif layer by specifying the layer in the "basin" parameter. The
function can be used to extract all the sub-catchment IDs present in a
sub-catchment raster as well, by providing the the sub-catchment raster
layer as the only input.'><meta property="og:description" content='Extracts the ID value of the basin and/or sub-catchment raster
layer at given point locations. Can also be used for point-based extraction
of any .tif layer by specifying the layer in the "basin" parameter. The
function can be used to extract all the sub-catchment IDs present in a
sub-catchment raster as well, by providing the the sub-catchment raster
layer as the only input.'></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">hydrographr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.4.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/hydrographr.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/benchmark.html">Function benchmarks</a></li>
    <li><a class="dropdown-item" href="../articles/case_study_brazil.html">Case study - São Francisco drainage basin</a></li>
    <li><a class="dropdown-item" href="../articles/case_study_cuba.html">Case study - Cuba</a></li>
    <li><a class="dropdown-item" href="../articles/case_study_Danube.html">Case study - Danube basin</a></li>
    <li><a class="dropdown-item" href="../articles/case_study_germany.html">Case study - Germany</a></li>
    <li><a class="dropdown-item" href="../articles/case_study_lakes.html">Case study - Lake Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/example_other_stream_networks.html">Usage of hydrographr with other stream networks</a></li>
    <li><a class="dropdown-item" href="../articles/linux_system_setup.html">Setting up the package requirements on Linux</a></li>
    <li><a class="dropdown-item" href="../articles/macos_system_setup.html">Setting up the package requirements on MacOS</a></li>
    <li><a class="dropdown-item" href="../articles/windows_system_setup.html">Setting up the package requirements on Windows</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/glowabio/hydrographr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Extract sub-catchment and/or basin IDs</h1>
      <small class="dont-index">Source: <a href="https://github.com/glowabio/hydrographr/blob/HEAD/R/extract_ids.R" class="external-link"><code>R/extract_ids.R</code></a></small>
      <div class="d-none name"><code>extract_ids.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Extracts the ID value of the basin and/or sub-catchment raster
layer at given point locations. Can also be used for point-based extraction
of any .tif layer by specifying the layer in the "basin" parameter. The
function can be used to extract all the sub-catchment IDs present in a
sub-catchment raster as well, by providing the the sub-catchment raster
layer as the only input.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">extract_ids</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">lon</span>,</span>
<span>  <span class="va">lat</span>,</span>
<span>  id <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  basin_layer <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  subc_layer <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>a data.frame or data.table that contains the columns regarding
the longitude / latitude coordinates in WGS84. If data is missing and a
sub-catchment raster layer is provided, the function will extract all the
ID value present in the layer.</p></dd>


<dt id="arg-lon">lon<a class="anchor" aria-label="anchor" href="#arg-lon"></a></dt>
<dd><p>character. The name of the column with the longitude coordinates.</p></dd>


<dt id="arg-lat">lat<a class="anchor" aria-label="anchor" href="#arg-lat"></a></dt>
<dd><p>character. The name of the column with the latitude coordinates.</p></dd>


<dt id="arg-id">id<a class="anchor" aria-label="anchor" href="#arg-id"></a></dt>
<dd><p>character. The name of a column containing unique IDs for each row
of "data" (e.g., occurrence or site IDs).</p></dd>


<dt id="arg-basin-layer">basin_layer<a class="anchor" aria-label="anchor" href="#arg-basin-layer"></a></dt>
<dd><p>character. Full path to the .tif layer with the basin ID.</p></dd>


<dt id="arg-subc-layer">subc_layer<a class="anchor" aria-label="anchor" href="#arg-subc-layer"></a></dt>
<dd><p>character. Full path to the .tif layer with the
sub-catchment ID.</p></dd>


<dt id="arg-quiet">quiet<a class="anchor" aria-label="anchor" href="#arg-quiet"></a></dt>
<dd><p>logical. If FALSE, the standard output will be printed.
Default is TRUE.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>For the extraction of a value at a given point location from the basin
and/or sub-catchment raster layer of the Hydrography90m dataset, the GDAL
function 'gdallocationinfo' is used. The point locations have to be defined
by coordinates in the WGS84 reference system. The function can also be used
to extract any value from a given raster layer in a WGS84 projection, such
as environmental information that is stored in the input raster file. The
extraction of all ID values from a sub-catchment raster layer is done with
terra::unique.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>Duplicated rows will be removed.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p><a href="https://gdal.org/programs/gdallocationinfo.html" class="external-link">https://gdal.org/programs/gdallocationinfo.html</a></p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Afroditi Grigoropoulou, Marlene Schürz</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># Download test data into the temporary R folder</span></span>
<span><span class="co"># or define a different directory</span></span>
<span><span class="va">my_directory</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="download_test_data.html">download_test_data</a></span><span class="op">(</span><span class="va">my_directory</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Example 1: Extracts the ID value at given point locations</span></span>
<span></span>
<span><span class="co"># Load occurrence data</span></span>
<span><span class="va">species_occurrence</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.table</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">my_directory</span>,</span>
<span>                                        <span class="st">"/hydrography90m_test_data"</span>,</span>
<span>                                        <span class="st">"/spdata_1264942.txt"</span><span class="op">)</span>,</span>
<span>                                 header <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Define full path to the basin and sub-catchments raster layer</span></span>
<span><span class="va">basin_raster</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">my_directory</span>,</span>
<span>                     <span class="st">"/hydrography90m_test_data/basin_1264942.tif"</span><span class="op">)</span></span>
<span><span class="va">subc_raster</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">my_directory</span>,</span>
<span>                    <span class="st">"/hydrography90m_test_data/basin_1264942.tif"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Extract basin and sub-catchment IDs from the Hydrography90m layers</span></span>
<span><span class="va">hydrography90m_ids</span> <span class="op">&lt;-</span> <span class="fu">extract_ids</span><span class="op">(</span>data <span class="op">=</span> <span class="va">species_occurrence</span>,</span>
<span>                                  lon <span class="op">=</span> <span class="st">"longitude"</span>,</span>
<span>                                  lat <span class="op">=</span> <span class="st">"latitude"</span>,</span>
<span>                                  id <span class="op">=</span> <span class="st">"occurrence_id"</span>,</span>
<span>                                  subc_layer <span class="op">=</span> <span class="va">subc_raster</span>,</span>
<span>                                  basin_layer <span class="op">=</span> <span class="va">basin_raster</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Show the output table</span></span>
<span><span class="va">hydrography90m_ids</span></span>
<span></span>
<span><span class="co"># Example 2: Extract ID values of all subcatchments</span></span>
<span><span class="va">subc_raster</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">my_directory</span>,</span>
<span><span class="st">"/hydrography90m_test_data/subcatchment_1264942.tif"</span><span class="op">)</span></span>
<span><span class="va">hydrography90m_ids</span> <span class="op">&lt;-</span> <span class="fu">extract_ids</span><span class="op">(</span>subc_layer <span class="op">=</span> <span class="va">subc_raster</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/fwrite.html" class="external-link">fwrite</a></span><span class="op">(</span><span class="va">hydrography90m_ids</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">my_directory</span>, <span class="st">'/subc_IDs.txt'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Marlene Schürz, Afroditi Grigoropoulou, Jaime Garcia Marquez, Yusdiel Torres Cambas, Christoph Schürz, Mathieu Floury, Thomas Tomiczek, Vanessa Bremerich, Merret Buurman, Giuseppe Amatulli, Sami Domisch.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

