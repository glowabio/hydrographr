<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Extract lake ids — extract_lake_ids • hydrographr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Extract lake ids — extract_lake_ids"><meta name="description" content="Extract lake ids either at the location
of point occurrences or falling within a bounding box"><meta property="og:description" content="Extract lake ids either at the location
of point occurrences or falling within a bounding box"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">hydrographr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.4.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/hydrographr.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/benchmark.html">Function benchmarks</a></li>
    <li><a class="dropdown-item" href="../articles/case_study_brazil.html">Case study - São Francisco drainage basin</a></li>
    <li><a class="dropdown-item" href="../articles/case_study_cuba.html">Case study - Cuba</a></li>
    <li><a class="dropdown-item" href="../articles/case_study_Danube.html">Case study - Danube Basin (Environment90m)</a></li>
    <li><a class="dropdown-item" href="../articles/case_study_germany.html">Case study - Germany</a></li>
    <li><a class="dropdown-item" href="../articles/case_study_lakes.html">Case study - Lake Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/example_other_stream_networks.html">Usage of hydrographr with other stream networks</a></li>
    <li><a class="dropdown-item" href="../articles/linux_system_setup.html">Setting up the package requirements on Linux</a></li>
    <li><a class="dropdown-item" href="../articles/macos_system_setup.html">Setting up the package requirements on MacOS</a></li>
    <li><a class="dropdown-item" href="../articles/windows_system_setup.html">Setting up the package requirements on Windows</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/glowabio/hydrographr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Extract lake ids</h1>
      <small class="dont-index">Source: <a href="https://github.com/glowabio/hydrographr/blob/HEAD/R/extract_lake_ids.R" class="external-link"><code>R/extract_lake_ids.R</code></a></small>
      <div class="d-none name"><code>extract_lake_ids.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Extract lake ids either at the location
of point occurrences or falling within a bounding box</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">extract_lake_ids</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">lon</span>,</span>
<span>  <span class="va">lat</span>,</span>
<span>  <span class="va">lake_shape</span>,</span>
<span>  var_name <span class="op">=</span> <span class="st">"Hylak_id"</span>,</span>
<span>  xmin <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ymin <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  xmax <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ymax <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  bbox <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">lake_id_table</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>a data.frame or data.table that contains the columns
the longitude / latitude coordinates in WGS84, i.e. of species point
occurrences</p></dd>


<dt id="arg-lon">lon<a class="anchor" aria-label="anchor" href="#arg-lon"></a></dt>
<dd><p>character. The name of the column with the longitude coordinates.</p></dd>


<dt id="arg-lat">lat<a class="anchor" aria-label="anchor" href="#arg-lat"></a></dt>
<dd><p>character. The name of the column with the latitude coordinates.</p></dd>


<dt id="arg-lake-shape">lake_shape<a class="anchor" aria-label="anchor" href="#arg-lake-shape"></a></dt>
<dd><p>Full path to lake shape files; i.e. HydroLAKES shapefiles;
when NULL a lake raster file needs to be provided</p></dd>


<dt id="arg-var-name">var_name<a class="anchor" aria-label="anchor" href="#arg-var-name"></a></dt>
<dd><p>character. Name of the shape file ID column, i.e. "Hylak_id"
for HydroLAKES; default is "Hylak_id"</p></dd>


<dt id="arg-xmin">xmin<a class="anchor" aria-label="anchor" href="#arg-xmin"></a></dt>
<dd><p>integer. bounding box coordinate check what is lower left corner in WGS84;
if NULL see parameter bbox</p></dd>


<dt id="arg-ymin">ymin<a class="anchor" aria-label="anchor" href="#arg-ymin"></a></dt>
<dd><p>integer. bounding box coordinate check what is lower right corner in WGS84;
if NULL see parameter bbox</p></dd>


<dt id="arg-xmax">xmax<a class="anchor" aria-label="anchor" href="#arg-xmax"></a></dt>
<dd><p>integer. bounding box coordinate upper right corner in WGS84;
if NULL see parameter bbox</p></dd>


<dt id="arg-ymax">ymax<a class="anchor" aria-label="anchor" href="#arg-ymax"></a></dt>
<dd><p>integer. bounding box coordinate upper left corner in WGS84;
if NULL see parameter bbox</p></dd>


<dt id="arg-bbox">bbox<a class="anchor" aria-label="anchor" href="#arg-bbox"></a></dt>
<dd><p>logical. if TRUE, then all lake ids within the bounding box are
returned, note that either bounding box values can be supplied thorugh xmin,
ymin, xmax and ymax values or when left empty (NULL) bounding box is
calculated from min max values of the longitude and latitude values provided
in the occurrence table; if FALSE lake ids in which point occurrences are
located are returned, default is FALSE</p></dd>


<dt id="arg-lake-id-table">lake_id_table<a class="anchor" aria-label="anchor" href="#arg-lake-id-table"></a></dt>
<dd><p>character. Full path of the output lake id table</p></dd>


<dt id="arg-quiet">quiet<a class="anchor" aria-label="anchor" href="#arg-quiet"></a></dt>
<dd><p>logical. If FALSE, the standard output will be printed.
Default is TRUE.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>For the extraction of a value at a given point location from the basin
and/or sub-catchment raster layer of the Hydrography90m dataset, the GDAL
function 'gdallocationinfo' is used. The point locations have to be defined
by coordinates in the WGS84 reference system.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>https://grass.osgeo.org/grass82/manuals/
<a href="https://gdal.org/programs/gdallocationinfo.html" class="external-link">https://gdal.org/programs/gdallocationinfo.html</a></p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Jaime Garcia Marquez, Thomas Tomiczek</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># Download test data into the temporary R folder</span></span>
<span><span class="co"># or define a different directory</span></span>
<span><span class="va">my_directory</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="download_test_data.html">download_test_data</a></span><span class="op">(</span><span class="va">my_directory</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Example 1: Extracts lake IDs for points located within a lake</span></span>
<span></span>
<span><span class="co"># Load occurrence data</span></span>
<span></span>
<span><span class="va">species_occurrence</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.table</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">my_directory</span>,</span>
<span>                                     <span class="st">"/hydrography90m_test_data"</span>,</span>
<span>                                     <span class="st">"/spdata_1264942.txt"</span><span class="op">)</span>,</span>
<span>                                     header <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># extract lake IDs which intersect with species point occurrences</span></span>
<span><span class="fu">extract_lake_ids</span><span class="op">(</span>data <span class="op">=</span> <span class="va">species_occurrence</span>,</span>
<span>                 lon <span class="op">=</span> <span class="st">"longitude"</span>,</span>
<span>                 lat <span class="op">=</span> <span class="st">"latitude"</span>,</span>
<span>                 var_name <span class="op">=</span> <span class="st">"lake_id"</span>,</span>
<span>                 lake_shape <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">my_directory</span>, <span class="st">"/hydrography90m_test_data"</span>,</span>
<span>                                     <span class="st">"/hydrography90m_test_lakes.gpkg"</span><span class="op">)</span>,</span>
<span>                 lake_id_table <span class="op">=</span> <span class="va">output_folder</span>,</span>
<span>                 quiet <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># extract lake IDs from bounding box taken from species point occurrences</span></span>
<span><span class="fu">extract_lake_ids</span><span class="op">(</span>data <span class="op">=</span> <span class="va">species_occurrence</span>,</span>
<span>                lon <span class="op">=</span> <span class="st">"longitude"</span>,</span>
<span>                lat <span class="op">=</span> <span class="st">"latitude"</span>,</span>
<span>                var_name <span class="op">=</span> <span class="st">"lake_id"</span>,</span>
<span>                lake_shape <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">my_directory</span>, <span class="st">"/hydrography90m_test_data"</span>,</span>
<span>                                    <span class="st">"/hydrography90m_test_lakes.gpkg"</span><span class="op">)</span>,</span>
<span>                bbox <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                lake_id_table <span class="op">=</span> <span class="va">output_folder</span>,</span>
<span>                quiet <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># extract lake IDs from provided bounding box</span></span>
<span><span class="fu">extract_lake_ids</span><span class="op">(</span>data <span class="op">=</span> <span class="va">species_occurrence</span>,</span>
<span>                 lon <span class="op">=</span> <span class="st">"longitude"</span>,</span>
<span>                 lat <span class="op">=</span> <span class="st">"latitude"</span>,</span>
<span>                 xmin <span class="op">=</span> <span class="fl">9.498263</span>,</span>
<span>                 ymin <span class="op">=</span> <span class="fl">44.21651</span>,</span>
<span>                 xmax <span class="op">=</span> <span class="fl">29.71806</span>,</span>
<span>                 ymax <span class="op">=</span> <span class="fl">50.25584</span>,</span>
<span>                 var_name <span class="op">=</span> <span class="st">"lake_id"</span>,</span>
<span>                 lake_shape <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">my_directory</span>, <span class="st">"/hydrography90m_test_data"</span>,</span>
<span>                                     <span class="st">"/hydrography90m_test_lakes.gpkg"</span><span class="op">)</span>,</span>
<span>                 bbox <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                 lake_id_table <span class="op">=</span> <span class="va">output_folder</span>,</span>
<span>                 quiet <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Marlene Schürz, Afroditi Grigoropoulou, Jaime Garcia Marquez, Yusdiel Torres Cambas, Christoph Schürz, Mathieu Floury, Thomas Tomiczek, Vanessa Bremerich, Merret Buurman, Giuseppe Amatulli, Sami Domisch.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

