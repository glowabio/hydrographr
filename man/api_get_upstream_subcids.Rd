% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/api_get_upstream_subcids.R
\name{api_get_upstream_subcids}
\alias{api_get_upstream_subcids}
\title{Retrieve Upstream Subcatchments for Snapped Coordinates}
\usage{
api_get_upstream_subcids(
  df,
  colname_lat = "latitude",
  colname_lon = "longitude",
  colname_site_id = "site_id",
  process_url = NULL,
  comment = NULL
)
}
\arguments{
\item{df}{A data frame containing snapped site coordinates, including latitude, longitude, and a site ID column.}

\item{colname_lat}{Name of the latitude column. Default is `"latitude"`.}

\item{colname_lon}{Name of the longitude column. Default is `"longitude"`.}

\item{colname_site_id}{Name of the site ID column. Default is `"site_id"`.}

\item{process_url}{URL of the pygeoapi process called by the function.
#'   Must be specified explicitly, e.g.,
  `"http://localhost:5000/processes/get-upstream-subcids/execution"`.}

\item{comment}{Optional character string to tag each API call (e.g., for logging or debugging).}
}
\value{
A data frame in long format with columns: \code{site_id}, \code{subc_id}, and \code{upstream_id}.
        Each row represents an upstream subcatchment ID linked to a sampling site.
}
\description{
This function queries the GeoFRESH API to retrieve all upstream subcatchments for each input site.
It is intended for use *after* site coordinates have been snapped to the river network using the
[get_snapped_points()] function. Returns a long-format data frame where each row represents an
upstream subcatchment associated with a given site.
}
\examples{
\dontrun{
# Example with 3 sites (must be snapped to the river network first)
df_sites <- data.frame(
  site_id = c("C-001841", "C-001842", "C-0101543"),
  latitude = c(40.26786, 40.29958, 40.14107),
  longitude = c(20.77203, 20.78125, 20.84042),
  stringsAsFactors = FALSE
)

# (Assumes these coordinates are already snapped using get_snapped_points())
upstream_df <- api_get_upstream_subcids(df = df_sites)
head(upstream_df)
}

}
\seealso{
Other ocgapi: 
\code{\link{api_get_env90m_data}()},
\code{\link{api_get_local_ids}()},
\code{\link{api_get_snapped_points}()},
\code{\link{api_get_snapped_points_strahler}()}
}
\concept{ocgapi}
